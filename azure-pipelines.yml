trigger:
  branches:
    include:
      - dev

pr:
  branches:
    include:
      - demo
      - prod

jobs:
- job: PR_Build
  condition: eq(variables['Build.Reason'], 'PullRequest')
  pool:
    name: 'Default'
    demands:
      - branch_merge -equals merge
  steps:
  - script: |
      echo "Running PR_Build job"
      echo "Build.Reason=$(Build.Reason)"
      echo "Source Branch=$(Build.SourceBranchName)"
    displayName: 'Debug Info'

- job: Branch_Build
  condition: ne(variables['Build.Reason'], 'PullRequest')
  pool:
    name: 'Default'
    demands:
      - branch -equals $(Build.SourceBranchName)
  steps:
  - script: |
      echo "Running Branch_Build job"
      echo "Build.Reason=$(Build.Reason)"
      echo "Source Branch=$(Build.SourceBranchName)"
    displayName: 'Debug Info'
